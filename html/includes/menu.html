<nav class="navbar navbar-expand-lg">
    <div class="container-fluid">
      <a class="navbar-brand" href="mainPage.html"><i class="bi bi-code-square"></i></a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item dropdown">
                <a class="nav-link" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Rum
                </a>
                <ul class="dropdown-menu" id="sortingDropdown">
                    <div class="container">
                        <div class="row">
                            <form class="d-flex">
                              <div class="border p-2">
                                <input class="form-control me-2 border-0 sorting" type="search" placeholder="Find Rum" aria-label="Search" oninput="search(this.value)">
                              </div>
                              <div class="border p-2">
                                <button class="btn btn-primary" id="sortingButton" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                  Sort√©r
                                </button>
                                <ul class="nested-dropdown dropdown-menu" aria-labelledby="dropdownMenuButton">
                                  <li><a class="dropdown-item" href="#" onclick="updateSortOrder('asc', event)">Alfabetisk</a></li>
                                  <li><a class="dropdown-item" href="#" onclick="updateSortOrder('desc', event)">Omvendt Alfabetisk</a></li>
                                </ul>
                              </div>
                            </form>
                            <li><hr class="dropdown-divider"></li>
                        </div>
                        <div class="row rooms" id="roomList">
                          <li><a href="selectedRoom.html?room=1">Rum 1</a></li>
                          <li><a href="selectedRoom.html?room=2">Rum 2</a></li>
                          <li><a href="selectedRoom.html?room=3">Rum 3</a></li>
                            </div>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="allRooms.html">Vis alle rum</a></li>
                    </div>
                </ul>
              </li>
          <li class="nav-item">
            <a class="nav-link" href="Calendar.html">Kalender</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://mit.kea.dk" target="_blank">Mit.kea.dk</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://office.com" target="_blank">Office 365</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" target="_blank">Book grupperum</a>
          </li>
          
        </ul>
        </div>
        <ul class="navbar-nav me-auto">
          <li class="nav-item dropdown">
            <a class="nav-link settings" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <img src="../../images/blank-profile-picture-973460_640.png" class="profile_image"><span  class="p-2 user_name"></span>
            </a>                  <div class="dropdown-menu dropdown-menu-end settings_content">
              <p class="user_info"><span class="user_name"></span>, <span id="user_role"></span></p>
              <div class="dropdown-divider"></div>

                  <a href="#" class="dropdown-item">Dine Indstillinger</a>
                  <div class="dropdown-divider"></div>
                  <a href="http://localhost:5500/index.html" class="dropdown-item">Log ud</a>
              </div>
          </li>
      </ul>
        </div>
        </nav>
        <script>
         const elements = [...document.getElementsByClassName("user_name")];

// Use forEach on the array
elements.forEach(element => {
  element.innerHTML = JSON.parse(localStorage.getItem("logged_in_user")).users_name;
});
          document.getElementById("user_role").innerHTML = JSON.parse(localStorage.getItem("logged_in_user")).roles_name;

          document.getElementById("sortingButton").addEventListener("click", function(event){
    event.stopPropagation();
  });
  document.getElementById('sortingDropdown').addEventListener('click', function (event) {
        event.stopPropagation();
      });
  
  
      function search(val) {
        // Convert the search value to lowercase for case-insensitive matching
        var searchValue = val.toLowerCase();
  
        // Get all list items
        var listItems = document.querySelectorAll('.rooms li');
  
        // Loop through each list item
        listItems.forEach(function (item) {
          // Get the text content of the anchor tag within the list item
          var textContent = item.querySelector('a').textContent.toLowerCase();
  
          // Check if the search value is found in the text content
          if (textContent.includes(searchValue)) {
            // Show the list item
            item.classList.remove('hidden');
          } else {
            // Hide the list item
            item.classList.add('hidden');
          }
        });
      }
      
  var asc = true;
  function updateSortOrder(selectedValue, event) {
    event.stopPropagation();
  
        // Handle the selected value from the dropdown
        console.log("Selected sorting option: " + selectedValue);
        asc = (selectedValue === "asc");
        var ul = document.getElementById("roomList");
  
        // Get all li elements within the ul
        var liArray = Array.from(ul.getElementsByTagName("li"));
  
        // Sort li elements based on their text content (room names)
        liArray.sort(function(a, b) {
          var nameA = a.textContent.trim();
          var nameB = b.textContent.trim();
  
          if (asc) {
            return nameA.localeCompare(nameB);
          } else {
            return nameB.localeCompare(nameA);
          }
        });
  
        // Remove existing li elements from the ul
        ul.innerHTML = "";
  
        // Append the sorted li elements back to the ul
        liArray.forEach(function(li) {
          ul.appendChild(li);
        });
  
        // Toggle the sorting order for the next click
        asc = !asc;
      }
  
  function sorting() {
        // Get the ul element containing the li items
        var ul = document.getElementById("roomList");
  
        // Get all li elements within the ul
        var liArray = Array.from(ul.getElementsByTagName("li"));
  
        // Sort li elements based on their text content (room names)
        liArray.sort(function(a, b) {
          var nameA = a.textContent.trim();
          var nameB = b.textContent.trim();
  
          if (asc) {
            return nameA.localeCompare(nameB);
          } else {
            return nameB.localeCompare(nameA);
          }
        });
  
        // Remove existing li elements from the ul
        ul.innerHTML = "";
  
        // Append the sorted li elements back to the ul
        liArray.forEach(function(li) {
          ul.appendChild(li);
        });
  
        // Toggle the sorting order for the next click
        asc = !asc;
      }
        </script>